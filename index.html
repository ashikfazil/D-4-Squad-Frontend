<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Portfolio Monitor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <!-- Restored Application Name -->
                <a href="#" class="logo">
                    <i class="fas fa-chart-line"></i>
                    <span>Asset Flow</span>
                </a>
            </div>
            <ul class="nav-menu">
                <li class="nav-item active" data-view="dashboard" onclick="showView('dashboard')">
                    <i class="fas fa-tachometer-alt"></i><span>Dashboard</span>
                </li>
                <li class="nav-item" data-view="stocks" onclick="showView('stocks')">
                    <i class="fas fa-arrow-trend-up"></i><span>Stocks</span>
                </li>
                <li class="nav-item" data-view="bonds" onclick="showView('bonds')">
                    <i class="fas fa-hand-holding-dollar"></i><span>Bonds</span>
                </li>
                <li class="nav-item" data-view="commodities" onclick="showView('commodities')">
                    <i class="fas fa-cubes"></i><span>Commodities</span>
                </li>
                <li class="nav-item" data-view="performance" onclick="showView('performance')">
                     <i class="fas fa-chart-area"></i><span>Performance</span>
                </li>
                <li class="nav-item" data-view="comparison" onclick="showView('comparison')">
                    <i class="fas fa-scale-balanced"></i><span>Comparison</span>
               </li>
                <li class="nav-item" data-view="history" onclick="showView('history')">
                    <i class="fas fa-history"></i><span>History</span>
                </li>
                <li class="nav-item" data-view="add-asset" onclick="showView('add-asset')">
                    <i class="fas fa-plus-circle"></i><span>Add Asset</span>
                </li>
            </ul>
            <div class="sidebar-footer">
                 <!-- Restored User Details -->
                <div class="user-profile">
                    <div class="avatar">M</div>
                    <div class="user-info">
                        <span class="username">Martin Jones</span>
                        <span class="user-role">Investor</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="header">
                <div class="header-left">
                    <h1 class="page-title">Dashboard</h1>
                    <p class="page-subtitle">Welcome back! Here's your portfolio overview</p>
                </div>
                <div class="header-right">
                    <div class="cash-wallet">
                        <div class="wallet-info">
                            <span class="wallet-label">CASH BALANCE</span>
                            <span class="wallet-amount" id="cash-balance">$0.00</span>
                        </div>
                        <button class="btn-add-cash" id="addCashBtn" title="Add Funds">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Dashboard View -->
            <div id="dashboard-view" class="view active">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-wallet"></i></div>
                        <div class="stat-content">
                            <h3 id="total-portfolio-value">$0.00</h3>
                            <p>Total Portfolio Value</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-layer-group"></i></div>
                        <div class="stat-content">
                            <h3 id="total-assets-count">0</h3>
                            <p>Total Assets</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="fas fa-arrow-up-right-dots"></i></div>
                        <div class="stat-content">
                            <h3 id="total-gain-loss">$0.00</h3>
                            <p>Total Gain/Loss</p>
                        </div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header"><h3>Asset Allocation</h3></div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="allocationChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header"><h3>Portfolio Value Over Time</h3></div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="categoryValueChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Other Views (Stocks, Bonds, etc.) -->
            <div id="stocks-view" class="view">
                <div class="card">
                    <div class="card-body portfolio-table-container">
                        <table class="portfolio-table">
                            <thead><tr><th>Asset</th><th>Shares</th><th>Purchase Price</th><th>Current Price</th><th>Market Value</th><th>Gain/Loss</th><th>Actions</th></tr></thead>
                            <tbody id="stocks-table-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>

            <div id="bonds-view" class="view">
                <div class="card">
                    <div class="card-body portfolio-table-container">
                        <table class="portfolio-table">
                            <thead><tr><th>Asset</th><th>Shares</th><th>Purchase Price</th><th>Current Price</th><th>Market Value</th><th>Gain/Loss</th><th>Actions</th></tr></thead>
                            <tbody id="bonds-table-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div id="commodities-view" class="view">
                <div class="card">
                    <div class="card-body portfolio-table-container">
                        <table class="portfolio-table">
                            <thead><tr><th>Asset</th><th>Shares</th><th>Purchase Price</th><th>Current Price</th><th>Market Value</th><th>Gain/Loss</th><th>Actions</th></tr></thead>
                            <tbody id="commodities-table-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div id="performance-view" class="view">
                <div class="card performance-card">
                    <div class="card-body">
                        <div class="performance-controls">
                            <div class="form-group">
                                <label for="stockSymbolInput">Asset Ticker (e.g., AAPL, GC=F)</label>
                                <input type="text" id="stockSymbolInput" placeholder="Enter Ticker Symbol">
                            </div>
                            <div class="range-selector">
                                <button class="range-btn btn-secondary active" data-range="30d">30d</button>
                                <button class="range-btn btn-secondary" data-range="365d">1yr</button>
                                <button class="range-btn btn-secondary" data-range="custom">Custom</button>
                                <div class="custom-date-range" id="customDateRange">
                                    <div class="form-group"><label for="startDateInput">Start Date</label><input type="date" id="startDateInput"></div>
                                    <div class="form-group"><label for="endDateInput">End Date</label><input type="date" id="endDateInput"></div>
                                </div>
                            </div>
                            <button id="getPerformanceBtn" class="btn-primary">Get Performance</button>
                        </div>
                    </div>
                </div>
                <div class="performance-chart-container card">
                    <canvas id="stockPerformanceChart"></canvas>
                </div>
            </div>

            <div id="comparison-view" class="view">
                <div class="comparison-controls">
                    <div class="input-group">
                        <label for="comparisonSymbol1">Asset 1 Ticker</label>
                        <input type="text" id="comparisonSymbol1" placeholder="e.g., AAPL">
                    </div>
                    <div class="input-group">
                        <label for="comparisonSymbol2">Asset 2 Ticker</label>
                        <input type="text" id="comparisonSymbol2" placeholder="e.g., GOOGL">
                    </div>
                    <div class="range-selector">
                        <button class="range-btn btn-secondary active" data-range="30d">30d</button>
                        <button class="range-btn btn-secondary" data-range="365d">1yr</button>
                    </div>
                    <button id="getComparisonBtn" class="btn-primary">Compare</button>
                </div>
                <div id="comparisonChartContainer" class="comparison-chart-container" style="display: none;">
                    <div class="card chart-wrapper">
                        <h3 id="comparisonChart1Title">Asset 1</h3>
                        <canvas id="comparisonChart1"></canvas>
                    </div>
                    <div class="card chart-wrapper">
                        <h3 id="comparisonChart2Title">Asset 2</h3>
                        <canvas id="comparisonChart2"></canvas>
                    </div>
                </div>
            </div>

            <div id="history-view" class="view">
                <div class="card">
                    <div class="card-body portfolio-table-container">
                        <table class="transaction-table">
                            <thead><tr><th>Name</th><th>Category</th><th>Type</th><th>Price</th><th>Quantity</th><th>Date</th></tr></thead>
                            <tbody id="transaction-table-body"></tbody>
                        </table>
                    </div>
                </div>
            </div>
            
            <div id="add-asset-view" class="view">
                 <div class="card form-card add-asset-form">
                    <form id="addAssetForm">
                        <fieldset class="form-fieldset">
                            <legend class="form-legend">Asset Details</legend>
                            <div class="form-group">
                                <label for="assetCategory">Asset Category</label>
                                <select id="assetCategory" name="assetCategory">
                                    <option value="stocks">Stock</option>
                                    <option value="bonds">Bond</option>
                                    <option value="commodities">Commodity</option>
                                </select>
                            </div>
                            <div id="stock-bond-fields">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="assetName">Asset Name</label>
                                        <input type="text" id="assetName" name="assetName" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="assetSymbol">Ticker Symbol</label>
                                        <input type="text" id="assetSymbol" name="assetSymbol" required>
                                        <div id="assetSymbolError" class="form-error"></div>
                                    </div>
                                </div>
                            </div>
                            <div id="commodity-fields" style="display: none;">
                                <div class="form-group">
                                    <label for="commodityType">Commodity Type</label>
                                    <select id="commodityType" name="commodityType"></select>
                                </div>
                            </div>
                        </fieldset>

                        <fieldset class="form-fieldset">
                            <legend class="form-legend">Transaction Details</legend>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="shares">Quantity / Shares</label>
                                    <input type="number" id="shares" name="shares" step="any" required>
                                    <div id="sharesError" class="form-error"></div>
                                </div>
                                <div class="form-group">
                                    <label for="purchasePrice">Purchase Price per Unit</label>
                                    <input type="number" id="purchasePrice" name="purchasePrice" step="any" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="purchaseDate">Purchase Date</label>
                                <input type="date" id="purchaseDate" name="purchaseDate" required>
                                <div id="purchaseDateError" class="form-error"></div>
                            </div>
                        </fieldset>
                        <div class="form-actions">
                            <button type="reset" class="btn-secondary">Cancel</button>
                            <button type="submit" class="btn-primary">Add Asset</button>
                        </div>
                    </form>
                 </div>
            </div>

        </main>
    </div>

    <!-- Add Cash Modal -->
    <div id="addCashModal" class="modal-overlay">
        <div class="modal-content card">
            <div class="modal-header">
                <h3>Add Funds to Wallet</h3>
                <button id="closeAddCashModal" class="close-modal">&times;</button>
            </div>
            <form id="addCashForm">
                <div class="modal-body">
                    <div class="form-group">
                        <label for="addCashAmount">Amount (USD)</label>
                        <input type="number" id="addCashAmount" step="0.01" min="0.01" required>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" id="cancelAddCash" class="btn-secondary">Cancel</button>
                    <button type="submit" class="btn-primary">Add Funds</button>
                </div>
            </form>
        </div>
    </div>


    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <script src="script.js"></script>
</body>
</html>